{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Oxidation\\\\DeveloperFacebook\\\\client\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\Oxidation\\\\DeveloperFacebook\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import axios from\"axios\";import{setAlert}from\"./alert\";import{GET_PROFILE,PROFILE_ERROR,UPDATE_PROFILE,CLEAR_PROFILE,ACCOUNT_DELETED,GET_PROFILES,GET_REPOS}from\"./types\";import profile from\"../reducers/profile\";//Get current user's profile\nexport var getCurrentProfile=function getCurrentProfile(){return(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"/api/profile/me\");case 3:res=_context.sent;dispatch({type:GET_PROFILE,payload:res.data});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);dispatch({type:PROFILE_ERROR,payload:{msg:_context.t0.response.statusText,status:_context.t0.response.status}});case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function(_x){return _ref.apply(this,arguments);};}());};//Get all user's profiles\nexport var getProfiles=function getProfiles(){return(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0://Clear what ever is in the current user's profile\ndispatch({type:CLEAR_PROFILE});_context2.prev=1;_context2.next=4;return axios.get(\"/api/profile\");case 4:res=_context2.sent;dispatch({type:GET_PROFILES,payload:res.data});_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);dispatch({type:PROFILE_ERROR,payload:{msg:_context2.t0.response.statusText,status:_context2.t0.response.status}});case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));return function(_x2){return _ref2.apply(this,arguments);};}());};//Get profile by ID\nexport var getProfileById=function getProfileById(userId){return(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.get(\"/api/profile/user/\".concat(userId));case 3:res=_context3.sent;dispatch({type:GET_PROFILE,payload:res.data});_context3.next=10;break;case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);dispatch({type:PROFILE_ERROR,payload:{msg:_context3.t0.response.statusText,status:_context3.t0.response.status}});case 10:case\"end\":return _context3.stop();}}},_callee3,null,[[0,7]]);}));return function(_x3){return _ref3.apply(this,arguments);};}());};//Get github repos\nexport var getGithubRepos=function getGithubRepos(username){return(/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){var res;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return axios.get(\"/api/profile/github/\".concat(username));case 3:res=_context4.sent;dispatch({type:GET_REPOS,payload:res.data});_context4.next=10;break;case 7:_context4.prev=7;_context4.t0=_context4[\"catch\"](0);dispatch({type:PROFILE_ERROR,payload:{msg:_context4.t0.response.statusText,status:_context4.t0.response.status}});case 10:case\"end\":return _context4.stop();}}},_callee4,null,[[0,7]]);}));return function(_x4){return _ref4.apply(this,arguments);};}());};//Create or update a profile, history is for client side route\nexport var createProfile=function createProfile(formData,history){var edit=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;return(/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch){var config,res,errors;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;config={headers:{\"Content-Type\":\"application/json\"}};//Post request to API/PROFILE\n_context5.next=4;return axios.post(\"api/profile\",formData,config);case 4:res=_context5.sent;dispatch({type:GET_PROFILE,payload:res.data});dispatch(setAlert(edit?\"Profile Updated\":\"Profile Created\",\"success\"));if(!edit){history.push(\"/dashboard\");}_context5.next=15;break;case 10:_context5.prev=10;_context5.t0=_context5[\"catch\"](0);errors=_context5.t0.response.data.errors;if(errors){errors.forEach(function(error){return dispatch(setAlert(error.msg,\"danger\"));});}dispatch({type:PROFILE_ERROR,payload:{msg:_context5.t0.response.statusText,status:_context5.t0.response.status}});case 15:case\"end\":return _context5.stop();}}},_callee5,null,[[0,10]]);}));return function(_x5){return _ref5.apply(this,arguments);};}());};//Add Experience for the User\nexport var addExperience=function addExperience(formData,history){return(/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(dispatch){var config,res,errors;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.prev=0;config={headers:{\"Content-Type\":\"application/json\"}};//Post request to API/PROFILE\n_context6.next=4;return axios.put(\"api/profile/experience\",formData,config);case 4:res=_context6.sent;dispatch({type:UPDATE_PROFILE,payload:res.data});dispatch(setAlert(\"Experience Added\",\"success\"));history.push(\"./dashboard\");_context6.next=15;break;case 10:_context6.prev=10;_context6.t0=_context6[\"catch\"](0);errors=_context6.t0.response.data.errors;if(errors){errors.forEach(function(error){return dispatch(setAlert(error.msg,\"danger\"));});}dispatch({type:PROFILE_ERROR,payload:{msg:_context6.t0.response.statusText,status:_context6.t0.response.status}});case 15:case\"end\":return _context6.stop();}}},_callee6,null,[[0,10]]);}));return function(_x6){return _ref6.apply(this,arguments);};}());};//Add Education for the User\nexport var addEducation=function addEducation(formData,history){return(/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(dispatch){var config,res,errors;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.prev=0;config={headers:{\"Content-Type\":\"application/json\"}};//Post request to API/PROFILE\n_context7.next=4;return axios.put(\"api/profile/education\",formData,config);case 4:res=_context7.sent;dispatch({type:UPDATE_PROFILE,payload:res.data});dispatch(setAlert(\"Education Added\",\"success\"));history.push(\"./dashboard\");_context7.next=15;break;case 10:_context7.prev=10;_context7.t0=_context7[\"catch\"](0);errors=_context7.t0.response.data.errors;if(errors){errors.forEach(function(error){return dispatch(setAlert(error.msg,\"danger\"));});}dispatch({type:PROFILE_ERROR,payload:{msg:_context7.t0.response.statusText,status:_context7.t0.response.status}});case 15:case\"end\":return _context7.stop();}}},_callee7,null,[[0,10]]);}));return function(_x7){return _ref7.apply(this,arguments);};}());};//Delete a user's experience\nexport var deleteExperience=function deleteExperience(id){return(/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(dispatch){var res;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.prev=0;_context8.next=3;return axios.delete(\"/api/profile/experience/:\".concat(id));case 3:res=_context8.sent;dispatch({type:UPDATE_PROFILE,payload:res.data});dispatch(setAlert(\"Experience Deleted\",\"danger\"));_context8.next=11;break;case 8:_context8.prev=8;_context8.t0=_context8[\"catch\"](0);dispatch({type:PROFILE_ERROR,payload:{msg:_context8.t0.response.statusText,status:_context8.t0.response.status}});case 11:case\"end\":return _context8.stop();}}},_callee8,null,[[0,8]]);}));return function(_x8){return _ref8.apply(this,arguments);};}());};//Delete a user's experience\nexport var deleteEducation=function deleteEducation(id){return(/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(dispatch){var res;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.prev=0;_context9.next=3;return axios.delete(\"/api/profile/education/:\".concat(id));case 3:res=_context9.sent;dispatch({type:UPDATE_PROFILE,payload:res.data});dispatch(setAlert(\"Education Deleted\",\"danger\"));_context9.next=11;break;case 8:_context9.prev=8;_context9.t0=_context9[\"catch\"](0);dispatch({type:PROFILE_ERROR,payload:{msg:_context9.t0.response.statusText,status:_context9.t0.response.status}});case 11:case\"end\":return _context9.stop();}}},_callee9,null,[[0,8]]);}));return function(_x9){return _ref9.apply(this,arguments);};}());};//Delete the account and profile\n//Delete a user's experience\nexport var deleteAccount=function deleteAccount(id){return(/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(dispatch){return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:if(!window.confirm(\"Are you sure you want to delete your account? This is permanent.\")){_context10.next=12;break;}_context10.prev=1;_context10.next=4;return axios.delete(\"/api/profile/\");case 4:dispatch({type:CLEAR_PROFILE});dispatch({type:ACCOUNT_DELETED});dispatch(setAlert(\"Account has been removed.\",\"danger\"));_context10.next=12;break;case 9:_context10.prev=9;_context10.t0=_context10[\"catch\"](1);dispatch({type:PROFILE_ERROR,payload:{msg:_context10.t0.response.statusText,status:_context10.t0.response.status}});case 12:case\"end\":return _context10.stop();}}},_callee10,null,[[1,9]]);}));return function(_x10){return _ref10.apply(this,arguments);};}());};","map":{"version":3,"sources":["C:/Users/Oxidation/DeveloperFacebook/client/src/actions/profile.js"],"names":["axios","setAlert","GET_PROFILE","PROFILE_ERROR","UPDATE_PROFILE","CLEAR_PROFILE","ACCOUNT_DELETED","GET_PROFILES","GET_REPOS","profile","getCurrentProfile","dispatch","get","res","type","payload","data","msg","response","statusText","status","getProfiles","getProfileById","userId","getGithubRepos","username","createProfile","formData","history","edit","config","headers","post","push","errors","forEach","error","addExperience","put","addEducation","deleteExperience","id","delete","deleteEducation","deleteAccount","window","confirm"],"mappings":"uQAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,KAAyB,SAAzB,CACA,OACEC,WADF,CAEEC,aAFF,CAGEC,cAHF,CAIEC,aAJF,CAKEC,eALF,CAMEC,YANF,CAOEC,SAPF,KAQO,SARP,CASA,MAAOC,CAAAA,OAAP,KAAoB,qBAApB,CAEA;AAEA,MAAO,IAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,mGAAM,iBAAMC,QAAN,gKAEjBX,CAAAA,KAAK,CAACY,GAAN,CAAU,iBAAV,CAFiB,QAE7BC,GAF6B,eAInCF,QAAQ,CAAC,CACPG,IAAI,CAAEZ,WADC,CAEPa,OAAO,CAAEF,GAAG,CAACG,IAFN,CAAD,CAAR,CAJmC,+EASnCL,QAAQ,CAAC,CACPG,IAAI,CAAEX,aADC,CAEPY,OAAO,CAAE,CAAEE,GAAG,CAAE,YAAIC,QAAJ,CAAaC,UAApB,CAAgCC,MAAM,CAAE,YAAIF,QAAJ,CAAaE,MAArD,CAFF,CAAD,CAAR,CATmC,oEAAN,iEAA1B,CAgBP;AAEA,MAAO,IAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,oGAAM,kBAAMV,QAAN,8HAC/B;AACAA,QAAQ,CAAC,CAAEG,IAAI,CAAET,aAAR,CAAD,CAAR,CAF+B,wCAKXL,CAAAA,KAAK,CAACY,GAAN,CAAU,cAAV,CALW,QAKvBC,GALuB,gBAO7BF,QAAQ,CAAC,CACPG,IAAI,CAAEP,YADC,CAEPQ,OAAO,CAAEF,GAAG,CAACG,IAFN,CAAD,CAAR,CAP6B,mFAY7BL,QAAQ,CAAC,CACPG,IAAI,CAAEX,aADC,CAEPY,OAAO,CAAE,CAAEE,GAAG,CAAE,aAAIC,QAAJ,CAAaC,UAApB,CAAgCC,MAAM,CAAE,aAAIF,QAAJ,CAAaE,MAArD,CAFF,CAAD,CAAR,CAZ6B,sEAAN,mEAApB,CAmBP;AAEA,MAAO,IAAME,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAAAC,MAAM,mGAAI,kBAAMZ,QAAN,sKAElBX,CAAAA,KAAK,CAACY,GAAN,6BAA+BW,MAA/B,EAFkB,QAE9BV,GAF8B,gBAIpCF,QAAQ,CAAC,CACPG,IAAI,CAAEZ,WADC,CAEPa,OAAO,CAAEF,GAAG,CAACG,IAFN,CAAD,CAAR,CAJoC,mFASpCL,QAAQ,CAAC,CACPG,IAAI,CAAEX,aADC,CAEPY,OAAO,CAAE,CAAEE,GAAG,CAAE,aAAIC,QAAJ,CAAaC,UAApB,CAAgCC,MAAM,CAAE,aAAIF,QAAJ,CAAaE,MAArD,CAFF,CAAD,CAAR,CAToC,sEAAJ,mEAA7B,CAgBP;AAEA,MAAO,IAAMI,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAAAC,QAAQ,mGAAI,kBAAMd,QAAN,sKAEpBX,CAAAA,KAAK,CAACY,GAAN,+BAAiCa,QAAjC,EAFoB,QAEhCZ,GAFgC,gBAItCF,QAAQ,CAAC,CACPG,IAAI,CAAEN,SADC,CAEPO,OAAO,CAAEF,GAAG,CAACG,IAFN,CAAD,CAAR,CAJsC,mFAStCL,QAAQ,CAAC,CACPG,IAAI,CAAEX,aADC,CAEPY,OAAO,CAAE,CAAEE,GAAG,CAAE,aAAIC,QAAJ,CAAaC,UAApB,CAAgCC,MAAM,CAAE,aAAIF,QAAJ,CAAaE,MAArD,CAFF,CAAD,CAAR,CATsC,sEAAJ,mEAA/B,CAgBP;AACA,MAAO,IAAMM,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAC3BC,QAD2B,CAE3BC,OAF2B,KAG3BC,CAAAA,IAH2B,2DAGpB,KAHoB,kGAIxB,kBAAMlB,QAAN,6JAEKmB,MAFL,CAEc,CACbC,OAAO,CAAE,CACP,eAAgB,kBADT,CADI,CAFd,CAQD;AARC,uBASiB/B,CAAAA,KAAK,CAACgC,IAAN,CAAW,aAAX,CAA0BL,QAA1B,CAAoCG,MAApC,CATjB,QASKjB,GATL,gBAWDF,QAAQ,CAAC,CACPG,IAAI,CAAEZ,WADC,CAEPa,OAAO,CAAEF,GAAG,CAACG,IAFN,CAAD,CAAR,CAKAL,QAAQ,CAACV,QAAQ,CAAC4B,IAAI,CAAG,iBAAH,CAAuB,iBAA5B,CAA+C,SAA/C,CAAT,CAAR,CAEA,GAAI,CAACA,IAAL,CAAW,CACTD,OAAO,CAACK,IAAR,CAAa,YAAb,EACD,CApBA,qFAsBKC,MAtBL,CAsBc,aAAIhB,QAAJ,CAAaF,IAAb,CAAkBkB,MAtBhC,CAwBD,GAAIA,MAAJ,CAAY,CACVA,MAAM,CAACC,OAAP,CAAe,SAAAC,KAAK,QAAIzB,CAAAA,QAAQ,CAACV,QAAQ,CAACmC,KAAK,CAACnB,GAAP,CAAY,QAAZ,CAAT,CAAZ,EAApB,EACD,CAEDN,QAAQ,CAAC,CACPG,IAAI,CAAEX,aADC,CAEPY,OAAO,CAAE,CAAEE,GAAG,CAAE,aAAIC,QAAJ,CAAaC,UAApB,CAAgCC,MAAM,CAAE,aAAIF,QAAJ,CAAaE,MAArD,CAFF,CAAD,CAAR,CA5BC,uEAJwB,mEAAtB,CAuCP;AACA,MAAO,IAAMiB,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACV,QAAD,CAAWC,OAAX,mGAAuB,kBAAMjB,QAAN,6JAE1CmB,MAF0C,CAEjC,CACbC,OAAO,CAAE,CACP,eAAgB,kBADT,CADI,CAFiC,CAQhD;AARgD,uBAS9B/B,CAAAA,KAAK,CAACsC,GAAN,CAAU,wBAAV,CAAoCX,QAApC,CAA8CG,MAA9C,CAT8B,QAS1CjB,GAT0C,gBAWhDF,QAAQ,CAAC,CACPG,IAAI,CAAEV,cADC,CAEPW,OAAO,CAAEF,GAAG,CAACG,IAFN,CAAD,CAAR,CAKAL,QAAQ,CAACV,QAAQ,CAAC,kBAAD,CAAqB,SAArB,CAAT,CAAR,CACA2B,OAAO,CAACK,IAAR,CAAa,aAAb,EAjBgD,qFAmB1CC,MAnB0C,CAmBjC,aAAIhB,QAAJ,CAAaF,IAAb,CAAkBkB,MAnBe,CAqBhD,GAAIA,MAAJ,CAAY,CACVA,MAAM,CAACC,OAAP,CAAe,SAAAC,KAAK,QAAIzB,CAAAA,QAAQ,CAACV,QAAQ,CAACmC,KAAK,CAACnB,GAAP,CAAY,QAAZ,CAAT,CAAZ,EAApB,EACD,CAEDN,QAAQ,CAAC,CACPG,IAAI,CAAEX,aADC,CAEPY,OAAO,CAAE,CAAEE,GAAG,CAAE,aAAIC,QAAJ,CAAaC,UAApB,CAAgCC,MAAM,CAAE,aAAIF,QAAJ,CAAaE,MAArD,CAFF,CAAD,CAAR,CAzBgD,uEAAvB,mEAAtB,CAgCP;AACA,MAAO,IAAMmB,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACZ,QAAD,CAAWC,OAAX,mGAAuB,kBAAMjB,QAAN,6JAEzCmB,MAFyC,CAEhC,CACbC,OAAO,CAAE,CACP,eAAgB,kBADT,CADI,CAFgC,CAQ/C;AAR+C,uBAS7B/B,CAAAA,KAAK,CAACsC,GAAN,CAAU,uBAAV,CAAmCX,QAAnC,CAA6CG,MAA7C,CAT6B,QASzCjB,GATyC,gBAW/CF,QAAQ,CAAC,CACPG,IAAI,CAAEV,cADC,CAEPW,OAAO,CAAEF,GAAG,CAACG,IAFN,CAAD,CAAR,CAKAL,QAAQ,CAACV,QAAQ,CAAC,iBAAD,CAAoB,SAApB,CAAT,CAAR,CACA2B,OAAO,CAACK,IAAR,CAAa,aAAb,EAjB+C,qFAmBzCC,MAnByC,CAmBhC,aAAIhB,QAAJ,CAAaF,IAAb,CAAkBkB,MAnBc,CAqB/C,GAAIA,MAAJ,CAAY,CACVA,MAAM,CAACC,OAAP,CAAe,SAAAC,KAAK,QAAIzB,CAAAA,QAAQ,CAACV,QAAQ,CAACmC,KAAK,CAACnB,GAAP,CAAY,QAAZ,CAAT,CAAZ,EAApB,EACD,CAEDN,QAAQ,CAAC,CACPG,IAAI,CAAEX,aADC,CAEPY,OAAO,CAAE,CAAEE,GAAG,CAAE,aAAIC,QAAJ,CAAaC,UAApB,CAAgCC,MAAM,CAAE,aAAIF,QAAJ,CAAaE,MAArD,CAFF,CAAD,CAAR,CAzB+C,uEAAvB,mEAArB,CAgCP;AACA,MAAO,IAAMoB,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAAAC,EAAE,mGAAI,kBAAM9B,QAAN,sKAEhBX,CAAAA,KAAK,CAAC0C,MAAN,oCAAyCD,EAAzC,EAFgB,QAE5B5B,GAF4B,gBAIlCF,QAAQ,CAAC,CACPG,IAAI,CAAEV,cADC,CAEPW,OAAO,CAAEF,GAAG,CAACG,IAFN,CAAD,CAAR,CAKAL,QAAQ,CAACV,QAAQ,CAAC,oBAAD,CAAuB,QAAvB,CAAT,CAAR,CATkC,mFAWlCU,QAAQ,CAAC,CACPG,IAAI,CAAEX,aADC,CAEPY,OAAO,CAAE,CAAEE,GAAG,CAAE,aAAIC,QAAJ,CAAaC,UAApB,CAAgCC,MAAM,CAAE,aAAIF,QAAJ,CAAaE,MAArD,CAFF,CAAD,CAAR,CAXkC,sEAAJ,mEAA3B,CAkBP;AACA,MAAO,IAAMuB,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAAF,EAAE,mGAAI,kBAAM9B,QAAN,sKAEfX,CAAAA,KAAK,CAAC0C,MAAN,mCAAwCD,EAAxC,EAFe,QAE3B5B,GAF2B,gBAIjCF,QAAQ,CAAC,CACPG,IAAI,CAAEV,cADC,CAEPW,OAAO,CAAEF,GAAG,CAACG,IAFN,CAAD,CAAR,CAKAL,QAAQ,CAACV,QAAQ,CAAC,mBAAD,CAAsB,QAAtB,CAAT,CAAR,CATiC,mFAWjCU,QAAQ,CAAC,CACPG,IAAI,CAAEX,aADC,CAEPY,OAAO,CAAE,CAAEE,GAAG,CAAE,aAAIC,QAAJ,CAAaC,UAApB,CAAgCC,MAAM,CAAE,aAAIF,QAAJ,CAAaE,MAArD,CAFF,CAAD,CAAR,CAXiC,sEAAJ,mEAA1B,CAkBP;AAEA;AACA,MAAO,IAAMwB,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAAAH,EAAE,oGAAI,mBAAM9B,QAAN,8HAG/BkC,MAAM,CAACC,OAAP,CACE,kEADF,CAH+B,sEAQvB9C,CAAAA,KAAK,CAAC0C,MAAN,iBARuB,QAU7B/B,QAAQ,CAAC,CACPG,IAAI,CAAET,aADC,CAAD,CAAR,CAIAM,QAAQ,CAAC,CACPG,IAAI,CAAER,eADC,CAAD,CAAR,CAIAK,QAAQ,CAACV,QAAQ,CAAC,2BAAD,CAA8B,QAA9B,CAAT,CAAR,CAlB6B,uFAoB7BU,QAAQ,CAAC,CACPG,IAAI,CAAEX,aADC,CAEPY,OAAO,CAAE,CAAEE,GAAG,CAAE,cAAIC,QAAJ,CAAaC,UAApB,CAAgCC,MAAM,CAAE,cAAIF,QAAJ,CAAaE,MAArD,CAFF,CAAD,CAAR,CApB6B,wEAAJ,qEAAxB","sourcesContent":["import axios from \"axios\";\r\nimport { setAlert } from \"./alert\";\r\nimport {\r\n  GET_PROFILE,\r\n  PROFILE_ERROR,\r\n  UPDATE_PROFILE,\r\n  CLEAR_PROFILE,\r\n  ACCOUNT_DELETED,\r\n  GET_PROFILES,\r\n  GET_REPOS\r\n} from \"./types\";\r\nimport profile from \"../reducers/profile\";\r\n\r\n//Get current user's profile\r\n\r\nexport const getCurrentProfile = () => async dispatch => {\r\n  try {\r\n    const res = await axios.get(\"/api/profile/me\");\r\n\r\n    dispatch({\r\n      type: GET_PROFILE,\r\n      payload: res.data\r\n    });\r\n  } catch (err) {\r\n    dispatch({\r\n      type: PROFILE_ERROR,\r\n      payload: { msg: err.response.statusText, status: err.response.status }\r\n    });\r\n  }\r\n};\r\n\r\n//Get all user's profiles\r\n\r\nexport const getProfiles = () => async dispatch => {\r\n  //Clear what ever is in the current user's profile\r\n  dispatch({ type: CLEAR_PROFILE });\r\n\r\n  try {\r\n    const res = await axios.get(\"/api/profile\");\r\n\r\n    dispatch({\r\n      type: GET_PROFILES,\r\n      payload: res.data\r\n    });\r\n  } catch (err) {\r\n    dispatch({\r\n      type: PROFILE_ERROR,\r\n      payload: { msg: err.response.statusText, status: err.response.status }\r\n    });\r\n  }\r\n};\r\n\r\n//Get profile by ID\r\n\r\nexport const getProfileById = userId => async dispatch => {\r\n  try {\r\n    const res = await axios.get(`/api/profile/user/${userId}`);\r\n\r\n    dispatch({\r\n      type: GET_PROFILE,\r\n      payload: res.data\r\n    });\r\n  } catch (err) {\r\n    dispatch({\r\n      type: PROFILE_ERROR,\r\n      payload: { msg: err.response.statusText, status: err.response.status }\r\n    });\r\n  }\r\n};\r\n\r\n//Get github repos\r\n\r\nexport const getGithubRepos = username => async dispatch => {\r\n  try {\r\n    const res = await axios.get(`/api/profile/github/${username}`);\r\n\r\n    dispatch({\r\n      type: GET_REPOS,\r\n      payload: res.data\r\n    });\r\n  } catch (err) {\r\n    dispatch({\r\n      type: PROFILE_ERROR,\r\n      payload: { msg: err.response.statusText, status: err.response.status }\r\n    });\r\n  }\r\n};\r\n\r\n//Create or update a profile, history is for client side route\r\nexport const createProfile = (\r\n  formData,\r\n  history,\r\n  edit = false\r\n) => async dispatch => {\r\n  try {\r\n    const config = {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      }\r\n    };\r\n\r\n    //Post request to API/PROFILE\r\n    const res = await axios.post(\"api/profile\", formData, config);\r\n\r\n    dispatch({\r\n      type: GET_PROFILE,\r\n      payload: res.data\r\n    });\r\n\r\n    dispatch(setAlert(edit ? \"Profile Updated\" : \"Profile Created\", \"success\"));\r\n\r\n    if (!edit) {\r\n      history.push(\"/dashboard\");\r\n    }\r\n  } catch (err) {\r\n    const errors = err.response.data.errors;\r\n\r\n    if (errors) {\r\n      errors.forEach(error => dispatch(setAlert(error.msg, \"danger\")));\r\n    }\r\n\r\n    dispatch({\r\n      type: PROFILE_ERROR,\r\n      payload: { msg: err.response.statusText, status: err.response.status }\r\n    });\r\n  }\r\n};\r\n\r\n//Add Experience for the User\r\nexport const addExperience = (formData, history) => async dispatch => {\r\n  try {\r\n    const config = {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      }\r\n    };\r\n\r\n    //Post request to API/PROFILE\r\n    const res = await axios.put(\"api/profile/experience\", formData, config);\r\n\r\n    dispatch({\r\n      type: UPDATE_PROFILE,\r\n      payload: res.data\r\n    });\r\n\r\n    dispatch(setAlert(\"Experience Added\", \"success\"));\r\n    history.push(\"./dashboard\");\r\n  } catch (err) {\r\n    const errors = err.response.data.errors;\r\n\r\n    if (errors) {\r\n      errors.forEach(error => dispatch(setAlert(error.msg, \"danger\")));\r\n    }\r\n\r\n    dispatch({\r\n      type: PROFILE_ERROR,\r\n      payload: { msg: err.response.statusText, status: err.response.status }\r\n    });\r\n  }\r\n};\r\n\r\n//Add Education for the User\r\nexport const addEducation = (formData, history) => async dispatch => {\r\n  try {\r\n    const config = {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      }\r\n    };\r\n\r\n    //Post request to API/PROFILE\r\n    const res = await axios.put(\"api/profile/education\", formData, config);\r\n\r\n    dispatch({\r\n      type: UPDATE_PROFILE,\r\n      payload: res.data\r\n    });\r\n\r\n    dispatch(setAlert(\"Education Added\", \"success\"));\r\n    history.push(\"./dashboard\");\r\n  } catch (err) {\r\n    const errors = err.response.data.errors;\r\n\r\n    if (errors) {\r\n      errors.forEach(error => dispatch(setAlert(error.msg, \"danger\")));\r\n    }\r\n\r\n    dispatch({\r\n      type: PROFILE_ERROR,\r\n      payload: { msg: err.response.statusText, status: err.response.status }\r\n    });\r\n  }\r\n};\r\n\r\n//Delete a user's experience\r\nexport const deleteExperience = id => async dispatch => {\r\n  try {\r\n    const res = await axios.delete(`/api/profile/experience/:${id}`);\r\n\r\n    dispatch({\r\n      type: UPDATE_PROFILE,\r\n      payload: res.data\r\n    });\r\n\r\n    dispatch(setAlert(\"Experience Deleted\", \"danger\"));\r\n  } catch (err) {\r\n    dispatch({\r\n      type: PROFILE_ERROR,\r\n      payload: { msg: err.response.statusText, status: err.response.status }\r\n    });\r\n  }\r\n};\r\n\r\n//Delete a user's experience\r\nexport const deleteEducation = id => async dispatch => {\r\n  try {\r\n    const res = await axios.delete(`/api/profile/education/:${id}`);\r\n\r\n    dispatch({\r\n      type: UPDATE_PROFILE,\r\n      payload: res.data\r\n    });\r\n\r\n    dispatch(setAlert(\"Education Deleted\", \"danger\"));\r\n  } catch (err) {\r\n    dispatch({\r\n      type: PROFILE_ERROR,\r\n      payload: { msg: err.response.statusText, status: err.response.status }\r\n    });\r\n  }\r\n};\r\n\r\n//Delete the account and profile\r\n\r\n//Delete a user's experience\r\nexport const deleteAccount = id => async dispatch => {\r\n  //Confirmation of account deletion\r\n  if (\r\n    window.confirm(\r\n      \"Are you sure you want to delete your account? This is permanent.\"\r\n    )\r\n  ) {\r\n    try {\r\n      await axios.delete(`/api/profile/`);\r\n\r\n      dispatch({\r\n        type: CLEAR_PROFILE\r\n      });\r\n\r\n      dispatch({\r\n        type: ACCOUNT_DELETED\r\n      });\r\n\r\n      dispatch(setAlert(\"Account has been removed.\", \"danger\"));\r\n    } catch (err) {\r\n      dispatch({\r\n        type: PROFILE_ERROR,\r\n        payload: { msg: err.response.statusText, status: err.response.status }\r\n      });\r\n    }\r\n  }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}